<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nuestra l√≠nea del tiempo ‚ú®</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#101321; --muted:#e9ecf6;
    --pink:#ffc8dd; --purple:#cdb4db; --blue:#bde0fe; --blue2:#a2d2ff;
    --panel:rgba(255,255,255,.08); --border:rgba(255,255,255,.22);
    --glow:0 18px 60px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    color:#fff; background: radial-gradient(1200px 600px at 50% -12%, #eadff6, #141625);
    animation: sky 14s ease-in-out infinite alternate; padding:16px;
  }
  @keyframes sky{
    0%{background:radial-gradient(1200px 600px at 50% -12%, #eadff6, #141625)}
    50%{background:radial-gradient(1200px 600px at 50% -12%, #ffc8dd, #10121f)}
    100%{background:radial-gradient(1200px 600px at 50% -12%, #bde0fe, #0f1320)}
  }
  header{max-width:1100px;margin:0 auto 12px;text-align:center}
  h1{margin:6px 0 2px; font-weight:900; font-size:clamp(1.6rem,5.2vw,2.6rem); text-shadow:0 2px 12px rgba(0,0,0,.35)}
  .sub{margin:0 0 12px; color:var(--muted)}

  .wrap{max-width:1100px;margin:0 auto; display:grid; gap:14px; grid-template-columns:1fr}
  @media(min-width:900px){ .wrap{grid-template-columns: 420px 1fr; align-items:start} }

  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:22px;
    box-shadow:var(--glow); backdrop-filter:blur(10px);
  }

  /* Lista izquierda */
  .left{padding:14px}
  .event{
    border:1px solid rgba(255,255,255,.18);
    border-radius:16px; padding:12px 12px 14px; margin:10px 0;
    background:rgba(255,255,255,.05);
    cursor:pointer; transition:.2s; position:relative;
  }
  .event:hover{transform:translateY(-2px)}
  .date{opacity:.85; font-size:.9rem; margin-bottom:4px}
  .title{font-weight:800}
  .excerpt{opacity:.95; margin-top:6px}
  .dot{
    position:absolute; right:-10px; top:14px; width:14px; height:14px; border-radius:50%;
    background:linear-gradient(135deg, var(--pink), var(--blue2)); box-shadow:0 0 0 4px rgba(255,255,255,.12);
  }
  .event.active{outline:2px solid rgba(255,255,255,.35)}

  /* Visor derecho */
  .viewer-head{
    display:flex; align-items:center; gap:10px; padding:12px 14px;
    border-bottom:1px solid rgba(255,255,255,.15)
  }
  .back{
    background:linear-gradient(135deg, var(--pink), var(--blue2));
    border:1px solid rgba(255,255,255,.4); color:#fff; font-weight:800;
    border-radius:999px; padding:8px 14px; text-decoration:none; box-shadow:0 10px 28px rgba(255,168,220,.35)
  }
  .viewer-title{margin:4px 0 2px; font-weight:900}
  .viewer-date{opacity:.85}
  .viewer-body{padding:14px; min-height:280px}
  .intro{margin-top:8px; opacity:.95}

  /* Tarjetas de imagen + texto (todas visibles) */
  .mem-grid{
    margin-top:14px;
    display:grid; gap:14px;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  }
  .memory-card{
    position:relative; border-radius:18px; padding:2px;
    background:linear-gradient(135deg, var(--pink), var(--blue2));
    box-shadow:0 16px 42px rgba(0,0,0,.35);
  }
  .memory-inner{
    border-radius:16px; overflow:hidden;
    background:rgba(20,22,37,.8); border:1px solid rgba(255,255,255,.18)
  }
  .memory-img{
    display:block; width:100%; height:auto; object-fit:cover;
    aspect-ratio:4/3;
  }
  .memory-text{
    padding:12px; line-height:1.7; color:#fff;
    border-top:1px solid rgba(255,255,255,.08);
  }

  /* Bot√≥n final */
  .footer{max-width:1100px; margin:18px auto 0; text-align:center}
  .cta{
    display:inline-block; margin-top:10px; padding:12px 20px; border-radius:14px; font-weight:900;
    color:#fff; text-decoration:none; letter-spacing:.2px;
    background:linear-gradient(135deg, var(--pink), var(--blue2));
    border:1px solid rgba(255,255,255,.6); box-shadow:0 14px 36px rgba(255,168,220,.35);
  }
  .cta:hover{transform:translateY(-2px)}
</style>
</head>
<body>
  <header>
    <h1>Nuestra l√≠nea del tiempo ‚ú®</h1>
    <p class="sub">Toca un evento y ver√°s todas sus fotos y texto juntos. üíñ</p>
  </header>

  <main class="wrap">
    <!-- LISTA -->
    <section id="list" class="panel left"></section>

    <!-- VISOR -->
    <section class="panel">
      <div class="viewer-head">
        <a class="back" href="./carta.html">Atr√°s</a>
        <div>
          <div id="vTitle" class="viewer-title">Selecciona un recuerdo</div>
          <div id="vDate" class="viewer-date">‚Äî</div>
        </div>
      </div>
      <div class="viewer-body">
        <div id="vIntro" class="intro">Aqu√≠ aparecer√°n todas las tarjetas con imagen + texto, sin tener que abrir una por una. üåü</div>
        <div id="memGrid" class="mem-grid"></div>
      </div>
    </section>
  </main>

  <!-- Bot√≥n al FINAL para ir a la p√°gina de regalos -->
  <div class="footer">
    <a class="cta" href="./regalo.html">üéÅ Ir a elegir mi regalo</a>
  </div>

<script>
/* ========= EDITA AQU√ç TUS EVENTOS =========
   Cada evento puede tener varias "memorias" (tarjetas).
   memories: [{ img: "ruta.jpg", text: "texto" }, ...] */
const timeline = [
  {
    date: "30 Jul 2024",
    title: "Mi primera carta para ti",
    intro: `Recuerdo de la primera vez que te escribir una carta mi amor, estaba muy nervioso porque fue la primera vez que sent√≠ tantas ganas de amar a alguien.`,
    memories: [
      { img: "IMG-20250819-WA0029.jpg", text: "El inicio de todo. Te escrib√≠ con el coraz√≥n en la mano y con mucha ilusi√≥n." }
    ]
  },
  {
    date: "22 Jul 2024",
    title: "Tu primera carta para m√≠",
    intro: `Esta fue la primera vez que me escribiste una carta, me lo escribiste poquito despu√©s de que te pidiera ser mi novia, sent√≠ muy bonito al leerla y am√© que nuestros sentimientos fueran mutuos.`,
    memories: [
      { img: "IMG-20250819-WA0024.jpg", text: "Tus palabras me abrazaron; me sent√≠ elegido." }
    ]
  },
  {
    date: "12 May 2025",
    title: "La primera vez que nos vimos",
    intro: `Este fue el d√≠a m√°s feliz de mi vida, conoc√≠ al amor de mi vida y cuando te abrac√© me sent√≠ en el cielo... me enamor√© mucho m√°s de lo que ya estaba.`,
    memories: [
      { img: "IMG-20250819-WA0030.jpg", text: "Tu risa, tus ojos, el abrazo. Entend√≠ lo que es el hogar." }
    ]
  },
  {
    date: "20 Jul 2025",
    title: "Las primeras flores que te di",
    intro: `El primer ramo que te di, te imagin√© sonriendo al recibirlo. Fue un detalle peque√±o con un amor enorme.`,
    memories: [
      { img: "IMG-20250819-WA0028.jpg", text: "Quise que te llegara un pedacito de primavera." }
    ]
  },
  {
    date: "",
    title: "Tus cartas y dibujos",
    intro: `No tienen fecha porque llegan seguido. Gracias por cada detalle; los guardo todos con cari√±o.`,
    memories: [
      { img: "IMG-20250814-WA0003.jpg", text: "Peque√±os pedazos de ti en cada trazo." },
      { img: "IMG-20250814-WA0005.jpg: "Mi galer√≠a favorita: la que haces con amor." }
    ]
  }
];

const $list   = document.getElementById('list');
const $vTitle = document.getElementById('vTitle');
const $vDate  = document.getElementById('vDate');
const $vIntro = document.getElementById('vIntro');
const $grid   = document.getElementById('memGrid');

function renderList() {
  $list.innerHTML = "";
  timeline.forEach((ev, i) => {
    const card = document.createElement('article');
    card.className = 'event';
    card.innerHTML = `
      <div class="date">${ev.date || "Sin fecha"}</div>
      <div class="title">${ev.title}</div>
      <div class="excerpt">${sanitize(ev.intro || "").split('\n')[0]}</div>
      <span class="dot"></span>
    `;
    card.addEventListener('click', () => openEvent(i));
    $list.appendChild(card);
  });
}

function openEvent(i){
  const ev = timeline[i];

  // Resaltar seleccionado
  [...$list.children].forEach(el => el.classList.remove('active'));
  $list.children[i].classList.add('active');

  $vTitle.textContent = ev.title;
  $vDate.textContent  = ev.date || "Sin fecha";
  $vIntro.textContent = ev.intro || "";

  // Renderizar TODAS las tarjetas del evento (imagen + texto)
  $grid.innerHTML = "";
  (ev.memories || []).forEach(mem => {
    const card = document.createElement('article');
    card.className = "memory-card";
    card.innerHTML = `
      <div class="memory-inner">
        <img class="memory-img" src="${mem.img}" alt="${escapeAttr(ev.title)}">
        <div class="memory-text">${sanitize(mem.text || "")}</div>
      </div>
    `;
    $grid.appendChild(card);
  });

  if ((ev.memories || []).length === 0) {
    $grid.innerHTML = `<p style="opacity:.9">Este evento no tiene im√°genes a√∫n. üí´</p>`;
  }

  // Desplazar al inicio del visor en m√≥viles
  document.querySelector('.viewer-head').scrollIntoView({behavior:'smooth', block:'start'});
}

// Utilidades
function sanitize(str=""){
  return str.replace(/[&<>]/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[s]));
}
function escapeAttr(s=""){ return s.replace(/"/g,'&quot;'); }

renderList();
</script>
</body>
</html>
